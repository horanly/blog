--- 
title: 9种常见的前端跨域解决方案 
date: 2019-07-10
categories: 
 - HTTP
tags: 
 - 跨域
---

## 一、什么是跨域
- 广义的跨域：是指一个域下的文档或脚本试图去请求另一个域下的资源；
- 狭义的跨域：通常是指浏览器向服务器发送跨域请求，由于浏览器的同源策略限制而产生的一种场景；

### 什么是同源策略
同源策略/SOP（Same origin policy）是一种约定，由Netscape公司1995年引入浏览器，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击。所谓同源是指"协议+域名+端口"三者相同，即便两个不同的域名指向同一个ip地址，也非同源。

同源策略限制以下几种行为：

> - 1.) Cookie、LocalStorage 和 IndexDB 无法读取
> - 2.) DOM 和 Js对象无法获得
> - 3.) AJAX 请求不能发送

### 常见跨域场景
![image](https://s2.ax1x.com/2019/07/11/ZRi8Jg.jpg)

## 二、9种跨域解决方案

### 1、JSONP 跨域

jsonp的原理是利用 \<script> 标签没有跨域限制，
通过 \<script> 标签src属性，
发送带有callback参数的GET请求，服务端将接口放回数据拼凑到callback函数中，返回给浏览器，浏览器解析执行，从而拿到callback函数返回的数据。

1)、原生JS实现：

<<< @/tpl/原生js实现跨域.js

服务端返回如下（返回时即执行全局函数）：

~~~ 
handleCallback({"success": true, "user": "admin"})
~~~

2）jquery Ajax实现：

